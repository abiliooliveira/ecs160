%ECS 160 Project Specification
%AUTHORS: ABILIO OLIVEIRA 999550263 AND JAMES DRYDEN 993083613

\documentclass[11pt]{article}
\usepackage{fancyhdr} % Required for custom headers
\usepackage{lastpage} % Required to determine the last page for the footer
\usepackage{extramarks} % Required for headers and footers
\usepackage{graphicx} % Required to insert images
\usepackage{listings} % Required for insertion of code
\usepackage{courier} % Required for the courier font
\usepackage{lipsum} % Used for inserting dummy 'Lorem ipsum' text into the template
\usepackage{datetime}
\usepackage{czt}

\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in
\headheight=26pt

\pagestyle{fancy}
\lhead{Abilio Oliveira \& James Dryden \\ 999550263 993083613} % Top left header
\rhead{Project Specification - ECS 160 \\ \today}

\begin{document}

\begin{center}\LARGE
	\textbf{Homestay App Specification}
\end{center}

\section*{Types}
Base classes from requirement's class diagram:
\begin{zed}
[Admin, Profile, File, Date Range, Allergie]\\
Response ::= success | error\\
ProfileType ::= student | host\\
FamilyStructure ::= couple | couple w/ kids| single parent | gay couple | gay couple w/ kids | other\\
Pet ::= cat | dog | chicken | birds | snakes | fish | other\\
\end{zed}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{The System}
The system must hold a schema by itself with the purpose of declaring its elements as well as its invariants:
\begin{schema}{HOMESTAYAPP}
	\Xi STUDENTS\\
	\Xi HOSTS\\
	managers : \power Admin\\
	requests : Profile \rightarrow Profile\\
	authorized\_requests : Profile \rightarrow Profile
\where
	students \subseteq Profile\\
	hosts \subseteq Profile\\
	students \cap Hosts = \emptyset\\
	\dom requests \subset students\\
	\ran requests \subset hosts\\
	requests \cap authorized_requests = \emptyset\\
	\forall s : students | s \in \dom Requests \bullet \#(s \dres Requests) \leq 3
\end{schema}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Actors}
\begin{schema}{STUDENTS}
	students : \power (Profile \rightarrow ((\nat \rightarrow FamilyStructure) \cross \power (\nat \rightarrow Pet) \cross \power Allergie))  \\
\where
\end{schema}

\begin{schema}{HOSTS}
	hosts : \power (Profile \rightarrow (\power Pet \cross \power FamilyStructure \cross \power Allergie))
	\where

\end{schema}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Manual Selection}

\begin{schema}{MANUAL}
	\Xi HOMESTAYAPP\\
\end{schema}

\section*{Selection Wizard}

\begin{schema}{WIZARD}
	\Xi HOMESTAYAPP\\
\end{schema}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{General Operations}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{Operations for both Student and Host}

\begin{schema}{CreateNewProfile}
	\Delta STUDENTS\\
	\Delta HOSTS\\
	type? : ProfileType\\
	p? : Profile\\
	family\_str\_if\_host? : FamilyStructure\\
	pets\_if\_host? : \power Pet\\
	family\_str\_pref\_if\_std? : \power (\nat \rightarrow FamilyStructure)\\
	pet\_pref\_if\_std? : \power Pet\\
	allr? : \power Allergie
	r! : Response
\where
	(type? = student \wedge\\
	\indent students' = students \cup \{p? \mapsto (family\_str\_pref\_if\_std?,\ pet\_pref\_if\_std?,\ allr?)\} \wedge\\
	\indent hosts' = hosts \wedge r! = success)\ \vee\\
	(type? = host \wedge\\
	 \indent hosts' = hosts \cup \{p? \mapsto (pets\_if\_host?,\ family\_str\_if\_host?,\ allr?)\} \wedge\\
	 \indent students' = students \wedge r! = success)
\end{schema}
When creating a profile the system doesn't yet know if the request is for a student profile or a host profile, that's why we need \emph{type?}.

\begin{schema}{UpdateProfile}
	\Delta STUDENTS\\
	\Delta HOSTS\\
	p? : Profile\\
	family\_str\_if\_host? : FamilyStructure\\
	pets\_if\_host? : \power Pet\\
	family\_str\_pref\_if\_std? : \power (\nat \rightarrow FamilyStructure)\\
	pet\_pref\_if\_std? : \power Pet\\
	allr? : \power Allergie
	r! : Response
\where
	(p? \in \dom students \wedge\\
	\indent students' = students \cup \{p? \mapsto (family\_str\_pref\_if\_std?,\ pet\_pref\_if\_std?,\ allr?)\} \wedge\\
	\indent hosts' = hosts \wedge r! = success)\ \vee\\
	(p? \in \dom students \wedge\\
	\indent hosts' = hosts \cup \{p? \mapsto (pets\_if\_host?,\ family\_str\_if\_host?,\ allr?)\} \wedge\\
	\indent students' = students \wedge r! = success)\ \vee\\
	(p? \not\in \dom students \wedge p? \not\in \dom hosts\ \wedge\\
	\indent students' = students\\
	\indent hosts' = hosts\\
	\indent r! = error)
\end{schema}
When updating, we can tell from \emph{p?} if its about students or hosts. Either way, this operation overwrites the data previously inserted for any information about students and/or hots.

\begin{schema}{DeleteProfile}
	\Delta STUDENTS\\
	\Delta HOSTS\\
	p? : Profile\\
	r! : Response
\where
\end{schema}

\begin{schema}{ViewRequests}
	\Xi HOMESTAYAPP\\
\end{schema}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection*{Operations related to Student}

\begin{schema}{ManualRequest}
	\Delta HOMESTAYAPP\\
	\Xi MANUAL


\end{schema}

\begin{schema}{WizardRequest}
	\Delta HOMESTAYAPP\\
	\Xi WIZARD\\

\end{schema}

\begin{schema}{SetPetPreference}
	\Delta STUDENTS\\
\end{schema}

\begin{schema}{SetFamilyStructurePreference}
	\Delta STUDENTS\\
\end{schema}

\begin{schema}{SetSmokingPreference}
	\Delta STUDENTS\\
\end{schema}

\begin{schema}{SetAllergies}
	\Delta STUDENTS\\
\end{schema}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection*{Operations related to Host}

\begin{schema}{AcceptRequest}
	\Delta HOMESTAYAPP\\
\end{schema}

\begin{schema}{SetPets}
	\Delta HOSTS\\
\end{schema}

\begin{schema}{SetFamilyStructure}
	\Delta HOSTS\\
\end{schema}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection*{Operations related to Admin}

\begin{schema}{ViewPendingRequests}
	\Xi HOMESTAYAPP\\
\end{schema}

\begin{schema}{AuthorizeRequest}
	\Delta HOMESTAYAPP\\
\end{schema}

\begin{schema}{ArrangeMeeting}
	\Delta HOMESTAYAPP\\
\end{schema}




























\end{document}